<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="/favicon.ico"><title>express框架 | ZH's BLOG</title><meta name="description" content="playing around">
    <link rel="modulepreload" href="/assets/app-3202c870.js"><link rel="modulepreload" href="/assets/framework-87c4c4c1.js"><link rel="modulepreload" href="/assets/10.html-ce65c325.js"><link rel="modulepreload" href="/assets/10.html-417043f1.js"><link rel="prefetch" href="/assets/index.html-6d5e9dd3.js" as="script"><link rel="prefetch" href="/assets/index.html-2285c9aa.js" as="script"><link rel="prefetch" href="/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/assets/index.html-e7b859f1.js" as="script"><link rel="prefetch" href="/assets/121501.html-62b45f52.js" as="script"><link rel="prefetch" href="/assets/121502.html-ab06c93d.js" as="script"><link rel="prefetch" href="/assets/121503.html-85ff0609.js" as="script"><link rel="prefetch" href="/assets/121504.html-17b6a593.js" as="script"><link rel="prefetch" href="/assets/ajax1.html-7faada51.js" as="script"><link rel="prefetch" href="/assets/ajax10.html-7080d342.js" as="script"><link rel="prefetch" href="/assets/ajax11.html-67dbf2a4.js" as="script"><link rel="prefetch" href="/assets/ajax2.html-66a5f809.js" as="script"><link rel="prefetch" href="/assets/ajax3.html-845299ad.js" as="script"><link rel="prefetch" href="/assets/ajax4.html-997fe3a3.js" as="script"><link rel="prefetch" href="/assets/ajax5.html-6067f4f7.js" as="script"><link rel="prefetch" href="/assets/ajax6.html-eff98aa8.js" as="script"><link rel="prefetch" href="/assets/ajax7.html-e59088e4.js" as="script"><link rel="prefetch" href="/assets/ajax8.html-188665b1.js" as="script"><link rel="prefetch" href="/assets/ajax9.html-6910d2e0.js" as="script"><link rel="prefetch" href="/assets/es1.html-efac7109.js" as="script"><link rel="prefetch" href="/assets/es10.html-ab52d2a6.js" as="script"><link rel="prefetch" href="/assets/es11.html-2180fc2f.js" as="script"><link rel="prefetch" href="/assets/es12.html-487d60d8.js" as="script"><link rel="prefetch" href="/assets/es13.html-0a026c6f.js" as="script"><link rel="prefetch" href="/assets/es14.html-987130b6.js" as="script"><link rel="prefetch" href="/assets/es15.html-affa2097.js" as="script"><link rel="prefetch" href="/assets/es2.html-67dee85e.js" as="script"><link rel="prefetch" href="/assets/es3.html-f997fdc2.js" as="script"><link rel="prefetch" href="/assets/es4.html-750a47e2.js" as="script"><link rel="prefetch" href="/assets/es5.html-ed676cb8.js" as="script"><link rel="prefetch" href="/assets/es6.html-722a204e.js" as="script"><link rel="prefetch" href="/assets/es7.html-321c77a6.js" as="script"><link rel="prefetch" href="/assets/es8.html-8ae411e1.js" as="script"><link rel="prefetch" href="/assets/es9.html-d62f4763.js" as="script"><link rel="prefetch" href="/assets/1.html-0d6e0bfa.js" as="script"><link rel="prefetch" href="/assets/11.html-2ab9bbd1.js" as="script"><link rel="prefetch" href="/assets/12.html-2c6b43b2.js" as="script"><link rel="prefetch" href="/assets/13.html-24e8808a.js" as="script"><link rel="prefetch" href="/assets/2.html-c26ee35d.js" as="script"><link rel="prefetch" href="/assets/3.html-f88d5161.js" as="script"><link rel="prefetch" href="/assets/4.html-071c592b.js" as="script"><link rel="prefetch" href="/assets/5.html-b5b6c816.js" as="script"><link rel="prefetch" href="/assets/6.html-495dcc08.js" as="script"><link rel="prefetch" href="/assets/7.html-1a25e362.js" as="script"><link rel="prefetch" href="/assets/8.html-c5397a09.js" as="script"><link rel="prefetch" href="/assets/9.html-e6d83545.js" as="script"><link rel="prefetch" href="/assets/BFC.html-541f5cc8.js" as="script"><link rel="prefetch" href="/assets/box.html-3d1d3421.js" as="script"><link rel="prefetch" href="/assets/cleanfloat.html-aa7fb79d.js" as="script"><link rel="prefetch" href="/assets/float.html-531d3772.js" as="script"><link rel="prefetch" href="/assets/layout.html-f3787abe.js" as="script"><link rel="prefetch" href="/assets/zhuzi.html-72fd8c25.js" as="script"><link rel="prefetch" href="/assets/block.html-99f04056.js" as="script"><link rel="prefetch" href="/assets/next.html-1705db5a.js" as="script"><link rel="prefetch" href="/assets/yuyi.html-32e6a2dd.js" as="script"><link rel="prefetch" href="/assets/async.html-9451d56a.js" as="script"><link rel="prefetch" href="/assets/async_data.html-ee74bba5.js" as="script"><link rel="prefetch" href="/assets/bibao.html-231b2bf4.js" as="script"><link rel="prefetch" href="/assets/cookie.html-1403f01b.js" as="script"><link rel="prefetch" href="/assets/copy.html-c2e3342c.js" as="script"><link rel="prefetch" href="/assets/EventLoop.html-be546d3f.js" as="script"><link rel="prefetch" href="/assets/fix.html-a65f4804.js" as="script"><link rel="prefetch" href="/assets/flat.html-d6066aef.js" as="script"><link rel="prefetch" href="/assets/for...in.html-bfcc38f9.js" as="script"><link rel="prefetch" href="/assets/forawait.html-7d361db2.js" as="script"><link rel="prefetch" href="/assets/kuohao.html-315cf219.js" as="script"><link rel="prefetch" href="/assets/makestring.html-fe53b5e4.js" as="script"><link rel="prefetch" href="/assets/mini.html-3e348427.js" as="script"><link rel="prefetch" href="/assets/nummax.html-93b97cb8.js" as="script"><link rel="prefetch" href="/assets/promise.html-f2f926f0.js" as="script"><link rel="prefetch" href="/assets/Promiseread.html-e7eca5fa.js" as="script"><link rel="prefetch" href="/assets/prototype.html-669abdc6.js" as="script"><link rel="prefetch" href="/assets/setmap.html-5638ace1.js" as="script"><link rel="prefetch" href="/assets/shuzu.html-e4ca3999.js" as="script"><link rel="prefetch" href="/assets/storage.html-8216f0b8.js" as="script"><link rel="prefetch" href="/assets/string.html-35f1c6ff.js" as="script"><link rel="prefetch" href="/assets/stringtest.html-d8829a0c.js" as="script"><link rel="prefetch" href="/assets/this.html-0baacdba.js" as="script"><link rel="prefetch" href="/assets/traottle.html-07fca5d7.js" as="script"><link rel="prefetch" href="/assets/var.html-823370c3.js" as="script"><link rel="prefetch" href="/assets/bobble.html-bdddfc6e.js" as="script"><link rel="prefetch" href="/assets/conpomentphone.html-5223b93a.js" as="script"><link rel="prefetch" href="/assets/diff.html-fb95d90d.js" as="script"><link rel="prefetch" href="/assets/DOM.html-a55e7e46.js" as="script"><link rel="prefetch" href="/assets/father_fix_children.html-09a339a4.js" as="script"><link rel="prefetch" href="/assets/gather.html-ee9f3aee.js" as="script"><link rel="prefetch" href="/assets/keep-alive.html-3a485d41.js" as="script"><link rel="prefetch" href="/assets/knowzhiling.html-b60cd2fb.js" as="script"><link rel="prefetch" href="/assets/modules.html-a978effa.js" as="script"><link rel="prefetch" href="/assets/new.html-317d9d97.js" as="script"><link rel="prefetch" href="/assets/queryparams.html-44dde2c7.js" as="script"><link rel="prefetch" href="/assets/stopevent.html-0ff3d688.js" as="script"><link rel="prefetch" href="/assets/v-model.html-2eaebd1b.js" as="script"><link rel="prefetch" href="/assets/vueming.html-099b9abf.js" as="script"><link rel="prefetch" href="/assets/Vuepash.html-22649f4c.js" as="script"><link rel="prefetch" href="/assets/vuerouter.html-49cd2cea.js" as="script"><link rel="prefetch" href="/assets/Vuex.html-14c6046a.js" as="script"><link rel="prefetch" href="/assets/vuexsz.html-ae31f743.js" as="script"><link rel="prefetch" href="/assets/zhiling.html-bab56a28.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-26fc07bb.js" as="script"><link rel="prefetch" href="/assets/index.html-e10be4ec.js" as="script"><link rel="prefetch" href="/assets/index.html-fb28aeac.js" as="script"><link rel="prefetch" href="/assets/index.html-81537ae2.js" as="script"><link rel="prefetch" href="/assets/121501.html-76d4c190.js" as="script"><link rel="prefetch" href="/assets/121502.html-fe001baf.js" as="script"><link rel="prefetch" href="/assets/121503.html-9f992719.js" as="script"><link rel="prefetch" href="/assets/121504.html-cf1f8151.js" as="script"><link rel="prefetch" href="/assets/ajax1.html-5b38a890.js" as="script"><link rel="prefetch" href="/assets/ajax10.html-3f7911fb.js" as="script"><link rel="prefetch" href="/assets/ajax11.html-77a26bfb.js" as="script"><link rel="prefetch" href="/assets/ajax2.html-5f8608ad.js" as="script"><link rel="prefetch" href="/assets/ajax3.html-7680bdd2.js" as="script"><link rel="prefetch" href="/assets/ajax4.html-7d3df64c.js" as="script"><link rel="prefetch" href="/assets/ajax5.html-f4522284.js" as="script"><link rel="prefetch" href="/assets/ajax6.html-bd033931.js" as="script"><link rel="prefetch" href="/assets/ajax7.html-01fd8712.js" as="script"><link rel="prefetch" href="/assets/ajax8.html-b62af119.js" as="script"><link rel="prefetch" href="/assets/ajax9.html-7abb20ba.js" as="script"><link rel="prefetch" href="/assets/es1.html-5bcf0d0f.js" as="script"><link rel="prefetch" href="/assets/es10.html-cff2a941.js" as="script"><link rel="prefetch" href="/assets/es11.html-e7b287ee.js" as="script"><link rel="prefetch" href="/assets/es12.html-4d2b3a94.js" as="script"><link rel="prefetch" href="/assets/es13.html-fbcd38aa.js" as="script"><link rel="prefetch" href="/assets/es14.html-32c1aad9.js" as="script"><link rel="prefetch" href="/assets/es15.html-4877fd82.js" as="script"><link rel="prefetch" href="/assets/es2.html-7155d20c.js" as="script"><link rel="prefetch" href="/assets/es3.html-1ff5ffa5.js" as="script"><link rel="prefetch" href="/assets/es4.html-32323aee.js" as="script"><link rel="prefetch" href="/assets/es5.html-f94a45de.js" as="script"><link rel="prefetch" href="/assets/es6.html-6f899e80.js" as="script"><link rel="prefetch" href="/assets/es7.html-e2961376.js" as="script"><link rel="prefetch" href="/assets/es8.html-ef2e142d.js" as="script"><link rel="prefetch" href="/assets/es9.html-5faf7b1a.js" as="script"><link rel="prefetch" href="/assets/1.html-5d3c4138.js" as="script"><link rel="prefetch" href="/assets/11.html-dbf60417.js" as="script"><link rel="prefetch" href="/assets/12.html-e06d211e.js" as="script"><link rel="prefetch" href="/assets/13.html-00bf7b04.js" as="script"><link rel="prefetch" href="/assets/2.html-9e74c8ff.js" as="script"><link rel="prefetch" href="/assets/3.html-46304813.js" as="script"><link rel="prefetch" href="/assets/4.html-bc997f09.js" as="script"><link rel="prefetch" href="/assets/5.html-d71c405d.js" as="script"><link rel="prefetch" href="/assets/6.html-64c92373.js" as="script"><link rel="prefetch" href="/assets/7.html-d1d385cf.js" as="script"><link rel="prefetch" href="/assets/8.html-8a55c495.js" as="script"><link rel="prefetch" href="/assets/9.html-6cecb211.js" as="script"><link rel="prefetch" href="/assets/BFC.html-5cdeefd9.js" as="script"><link rel="prefetch" href="/assets/box.html-dceaffb7.js" as="script"><link rel="prefetch" href="/assets/cleanfloat.html-69fb0868.js" as="script"><link rel="prefetch" href="/assets/float.html-548a5eca.js" as="script"><link rel="prefetch" href="/assets/layout.html-b89609ef.js" as="script"><link rel="prefetch" href="/assets/zhuzi.html-56fa950a.js" as="script"><link rel="prefetch" href="/assets/block.html-1ab06c7f.js" as="script"><link rel="prefetch" href="/assets/next.html-eb24aed7.js" as="script"><link rel="prefetch" href="/assets/yuyi.html-58ac81a7.js" as="script"><link rel="prefetch" href="/assets/async.html-c744cb27.js" as="script"><link rel="prefetch" href="/assets/async_data.html-b8780dbc.js" as="script"><link rel="prefetch" href="/assets/bibao.html-63285730.js" as="script"><link rel="prefetch" href="/assets/cookie.html-c2e65508.js" as="script"><link rel="prefetch" href="/assets/copy.html-ff2a48a1.js" as="script"><link rel="prefetch" href="/assets/EventLoop.html-06cf2a3f.js" as="script"><link rel="prefetch" href="/assets/fix.html-96073875.js" as="script"><link rel="prefetch" href="/assets/flat.html-4b38aabc.js" as="script"><link rel="prefetch" href="/assets/for...in.html-e19ca2d8.js" as="script"><link rel="prefetch" href="/assets/forawait.html-bc48b6df.js" as="script"><link rel="prefetch" href="/assets/kuohao.html-0f43d1b6.js" as="script"><link rel="prefetch" href="/assets/makestring.html-63ab9711.js" as="script"><link rel="prefetch" href="/assets/mini.html-932d4c1d.js" as="script"><link rel="prefetch" href="/assets/nummax.html-0a714bc5.js" as="script"><link rel="prefetch" href="/assets/promise.html-e65dcf91.js" as="script"><link rel="prefetch" href="/assets/Promiseread.html-b15e8587.js" as="script"><link rel="prefetch" href="/assets/prototype.html-85e9c9f0.js" as="script"><link rel="prefetch" href="/assets/setmap.html-3fa756ed.js" as="script"><link rel="prefetch" href="/assets/shuzu.html-cfb594a4.js" as="script"><link rel="prefetch" href="/assets/storage.html-bd11c405.js" as="script"><link rel="prefetch" href="/assets/string.html-11ace7b6.js" as="script"><link rel="prefetch" href="/assets/stringtest.html-6b904276.js" as="script"><link rel="prefetch" href="/assets/this.html-bf2bd511.js" as="script"><link rel="prefetch" href="/assets/traottle.html-a04d1ba2.js" as="script"><link rel="prefetch" href="/assets/var.html-58efb223.js" as="script"><link rel="prefetch" href="/assets/bobble.html-09054dd3.js" as="script"><link rel="prefetch" href="/assets/conpomentphone.html-5d8343ca.js" as="script"><link rel="prefetch" href="/assets/diff.html-29bba67e.js" as="script"><link rel="prefetch" href="/assets/DOM.html-02c105d0.js" as="script"><link rel="prefetch" href="/assets/father_fix_children.html-33601f16.js" as="script"><link rel="prefetch" href="/assets/gather.html-76bc45b4.js" as="script"><link rel="prefetch" href="/assets/keep-alive.html-965a00af.js" as="script"><link rel="prefetch" href="/assets/knowzhiling.html-3541445e.js" as="script"><link rel="prefetch" href="/assets/modules.html-89a3145b.js" as="script"><link rel="prefetch" href="/assets/new.html-1bfe99c3.js" as="script"><link rel="prefetch" href="/assets/queryparams.html-d9311487.js" as="script"><link rel="prefetch" href="/assets/stopevent.html-3cf5fdf2.js" as="script"><link rel="prefetch" href="/assets/v-model.html-19550198.js" as="script"><link rel="prefetch" href="/assets/vueming.html-f54f45eb.js" as="script"><link rel="prefetch" href="/assets/Vuepash.html-d81216a5.js" as="script"><link rel="prefetch" href="/assets/vuerouter.html-3da8193c.js" as="script"><link rel="prefetch" href="/assets/Vuex.html-39ae0526.js" as="script"><link rel="prefetch" href="/assets/vuexsz.html-2470021b.js" as="script"><link rel="prefetch" href="/assets/zhiling.html-97ce1622.js" as="script"><link rel="prefetch" href="/assets/404.html-4f5710ec.js" as="script"><link rel="prefetch" href="/assets/reco-valine-a0c1af1f.js" as="script">
    <link rel="preload" href="/assets/style-341ae97a.css" as="style"><link rel="stylesheet" href="/assets/style-341ae97a.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><div><header class="navbar-container"><!--[--><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="ZH&#39;s BLOG"><a href="/" class="site-name can-hide">ZH&#39;s BLOG</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/categories/2023/1/" class="link" aria-label="随记"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M25.7 9.3l-7-7c-.2-.2-.4-.3-.7-.3H8c-1.1 0-2 .9-2 2v24c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-.3-.1-.5-.3-.7zM18 4.4l5.6 5.6H18V4.4zM24 28H8V4h8v6c0 1.1.9 2 2 2h6v16z" fill="currentColor"></path><path d="M10 22h12v2H10z" fill="currentColor"></path><path d="M10 16h12v2H10z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->随记<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="面试题"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4A12 12 0 1 1 4 16A12 12 0 0 1 16 4m0-2a14 14 0 1 0 14 14A14 14 0 0 0 16 2z" fill="currentColor"></path><path d="M23 10.41L21.59 9l-4.3 4.3a3 3 0 0 0-4 4L9 21.59L10.41 23l4.3-4.3a3 3 0 0 0 4-4zM17 16a1 1 0 1 1-1-1a1 1 0 0 1 1 1z" fill="currentColor"></path><circle cx="16" cy="7.5" r="1.5" fill="currentColor"></circle></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="面试题"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4A12 12 0 1 1 4 16A12 12 0 0 1 16 4m0-2a14 14 0 1 0 14 14A14 14 0 0 0 16 2z" fill="currentColor"></path><path d="M23 10.41L21.59 9l-4.3 4.3a3 3 0 0 0-4 4L9 21.59L10.41 23l4.3-4.3a3 3 0 0 0 4-4zM17 16a1 1 0 1 1-1-1a1 1 0 0 1 1 1z" fill="currentColor"></path><circle cx="16" cy="7.5" r="1.5" fill="currentColor"></circle></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/docs/base/vue/new" class="link" aria-label="vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/docs/base/javascript/async" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/docs/base/html/block" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/docs/base/css/BFC" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="笔记"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="笔记"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/node/1" class="link router-link-active" aria-label="node.js笔记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->node.js笔记<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/docs/ajax/ajax11" class="link" aria-label="ajax笔记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ajax笔记<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/docs/es6/es15" class="link" aria-label="Es6笔记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Es6笔记<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div><!--]--></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/categories/2023/1/" class="link" aria-label="随记"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M25.7 9.3l-7-7c-.2-.2-.4-.3-.7-.3H8c-1.1 0-2 .9-2 2v24c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-.3-.1-.5-.3-.7zM18 4.4l5.6 5.6H18V4.4zM24 28H8V4h8v6c0 1.1.9 2 2 2h6v16z" fill="currentColor"></path><path d="M10 22h12v2H10z" fill="currentColor"></path><path d="M10 16h12v2H10z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->随记<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="面试题"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4A12 12 0 1 1 4 16A12 12 0 0 1 16 4m0-2a14 14 0 1 0 14 14A14 14 0 0 0 16 2z" fill="currentColor"></path><path d="M23 10.41L21.59 9l-4.3 4.3a3 3 0 0 0-4 4L9 21.59L10.41 23l4.3-4.3a3 3 0 0 0 4-4zM17 16a1 1 0 1 1-1-1a1 1 0 0 1 1 1z" fill="currentColor"></path><circle cx="16" cy="7.5" r="1.5" fill="currentColor"></circle></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="面试题"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4A12 12 0 1 1 4 16A12 12 0 0 1 16 4m0-2a14 14 0 1 0 14 14A14 14 0 0 0 16 2z" fill="currentColor"></path><path d="M23 10.41L21.59 9l-4.3 4.3a3 3 0 0 0-4 4L9 21.59L10.41 23l4.3-4.3a3 3 0 0 0 4-4zM17 16a1 1 0 1 1-1-1a1 1 0 0 1 1 1z" fill="currentColor"></path><circle cx="16" cy="7.5" r="1.5" fill="currentColor"></circle></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/docs/base/vue/new" class="link" aria-label="vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/docs/base/javascript/async" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/docs/base/html/block" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/docs/base/css/BFC" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="笔记"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="笔记"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/node/1" class="link router-link-active" aria-label="node.js笔记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->node.js笔记<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/docs/ajax/ajax11" class="link" aria-label="ajax笔记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ajax笔记<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/docs/es6/es15" class="link" aria-label="Es6笔记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Es6笔记<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/logo.png" alt="ZH&#39;s BLOG"><a href="/" class="site-name can-hide">ZH&#39;s BLOG</a></div><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading active">node.js笔记</h5><ul><li><!--[--><a href="/docs/node/1.html" class="link series-item" aria-label="node.js的作用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->node.js的作用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/2.html" class="link series-item" aria-label="认识命令行"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->认识命令行<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/3.html" class="link series-item" aria-label="node.js编码注意事项"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->node.js编码注意事项<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/4.html" class="link series-item" aria-label="buffer（缓冲器）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->buffer（缓冲器）<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/5.html" class="link series-item" aria-label="_fs模块"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->_fs模块<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/6.html" class="link series-item" aria-label="_path模块"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->_path模块<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/7.html" class="link series-item" aria-label="HTTP协议"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTTP协议<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/8.html" class="link series-item" aria-label="Node.js模块化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Node.js模块化<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/9.html" class="link series-item" aria-label="包管理工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->包管理工具<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a aria-current="page" href="/docs/node/10.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="express框架"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->express框架<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/11.html" class="link series-item" aria-label="mongoDB"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->mongoDB<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/12.html" class="link series-item" aria-label="接口"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->接口<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/node/13.html" class="link series-item" aria-label="会话控制"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->会话控制<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">express框架</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Matthew<!--]--></span></span><!----><!----><!----><!----></div><div class="theme-reco-default-content"><div><h1 id="express框架" tabindex="-1"><a class="header-anchor" href="#express框架" aria-hidden="true">#</a> express框架</h1><h2 id="_1-介绍" tabindex="-1"><a class="header-anchor" href="#_1-介绍" aria-hidden="true">#</a> 1. 介绍</h2><ul><li>express 是一个基于 Node.js 平台的极简、灵活的 WEB 应用开发框架，官方网址：https://www.expressjs.com.cn/ <br></li><li>简单来说，express 是一个封装好的工具包，封装了很多功能，便于我们开发 WEB 应用（HTTP 服务）</li></ul><h2 id="_2-使用" tabindex="-1"><a class="header-anchor" href="#_2-使用" aria-hidden="true">#</a> 2. 使用</h2><h3 id="_1-下载" tabindex="-1"><a class="header-anchor" href="#_1-下载" aria-hidden="true">#</a> (1). 下载</h3><blockquote><p>npm i express</p></blockquote><h3 id="_2-使用-1" tabindex="-1"><a class="header-anchor" href="#_2-使用-1" aria-hidden="true">#</a> (2). 使用</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//1. 导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 创建路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;hello express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//4. 监听端口 启动服务</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;服务已经启动，端口1000 正在监听中&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-express路由" tabindex="-1"><a class="header-anchor" href="#_3-express路由" aria-hidden="true">#</a> 3. express路由</h2><h3 id="_1-什么是路由" tabindex="-1"><a class="header-anchor" href="#_1-什么是路由" aria-hidden="true">#</a> (1). 什么是路由</h3><blockquote><p>官方定义： 路由确定了应用程序如何响应客户端对特定端点的请求</p></blockquote><h3 id="_2-路由的使用" tabindex="-1"><a class="header-anchor" href="#_2-路由的使用" aria-hidden="true">#</a> (2). 路由的使用</h3><p>一个路由的组成有 请求方法 ， 路径 和 回调函数 组成 <br> express 中提供了一系列方法，可以很方便的使用路由，使用格式如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> app.&lt;method&gt;(path，callback)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建 get 路由</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;网站首页&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//首页路由</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;我才是真正的首页&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建 post 路由</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;登录成功&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//匹配所有的请求方法</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;/search&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;1 秒钟为您找到相关结果约 100,000,000 个&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自定义 404 路由</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//监听端口 启动服务</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;服务已经启动, 端口监听为 3000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-获取请求参数" tabindex="-1"><a class="header-anchor" href="#_3-获取请求参数" aria-hidden="true">#</a> (3). 获取请求参数</h3><p>express 框架封装了一些 API 来方便获取请求报文中的数据，并且兼容原生 HTTP 模块的获取方式</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取请求的路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/request&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 获取报文的方式与原生 HTTP 获取方式是兼容的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>httpVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. express 独有的获取报文的方式</span>
    <span class="token comment">//获取查询字符串</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 『相对重要』</span>
    <span class="token comment">// 获取指定的请求头</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;host&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;请求报文的获取&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//启动服务</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;启动成功....&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-获取路由参数" tabindex="-1"><a class="header-anchor" href="#_4-获取路由参数" aria-hidden="true">#</a> (4). 获取路由参数</h3><p>路由参数指的是 URL 路径中的参数(数据)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/:id.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;商品详情, 商品 id 为&#39;</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小练习" tabindex="-1"><a class="header-anchor" href="#小练习" aria-hidden="true">#</a> 小练习</h3><p>根据路由参数响应歌手的信息<br> 路径结构如下<br></p><blockquote><p>/singers/1.html</p></blockquote><p>显示歌手的姓名和图片</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;singers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;singer_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;周杰伦&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;singer_pic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://y.gtimg.cn/music/photo_new/T001R150x150M0000025NhlN2yWrP4.webp&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;other_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jay Chou&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;singer_id&quot;</span><span class="token operator">:</span> <span class="token number">4558</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;singer_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;林俊杰&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;singer_pic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://y.gtimg.cn/music/photo_new/T001R150x150M000001BLpXF2DyJe2.webp&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;other_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JJ Lin&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;singer_id&quot;</span><span class="token operator">:</span> <span class="token number">4286</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//1. 导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> <span class="token punctuation">{</span> singers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./singers.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// console.log(singers);</span>
<span class="token comment">//3. 创建路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/singers/:id.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>


    <span class="token keyword">let</span> result <span class="token operator">=</span> singers<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token function">Number</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;!DOCTYPE html&gt;
    &lt;html lang=&quot;en&quot;&gt;


    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
        &lt;title&gt;Document&lt;/title&gt;
    &lt;/head&gt;


    &lt;body&gt;
        &lt;h1&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>singer_name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h1&gt;
        &lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>singer_pic<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; alt=&quot;&quot;&gt;
    &lt;/body&gt;


    &lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//4. 监听端口 启动服务</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;服务已经启动, 端口4000 正在监听中&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-express响应设置" tabindex="-1"><a class="header-anchor" href="#_4-express响应设置" aria-hidden="true">#</a> 4. express响应设置</h2><p>express 框架封装了一些 API 来方便给客户端响应数据，并且兼容原生 HTTP 模块的获取方式</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//获取请求的路由规则</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/response&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. express 中设置响应的方式兼容 HTTP 模块的方式</span>
    res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span>statusMessage <span class="token operator">=</span> <span class="token string">&#39;xxx&#39;</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;xyz&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;响应体&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. express 的响应方法</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置响应状态码</span>
    res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;yyy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置响应头</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;中文响应不乱码&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置响应体</span>
    <span class="token comment">//连贯操作</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;yyy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;你好朋友&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">//3. 其他响应</span>
    res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;http://baidu.com&#39;</span><span class="token punctuation">)</span><span class="token comment">//重定向</span>
    res<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token string">&#39;./package.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//下载响应</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//响应 JSON</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&#39;/home.html&#39;</span><span class="token punctuation">)</span> <span class="token comment">//响应文件内容</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-express中间件" tabindex="-1"><a class="header-anchor" href="#_5-express中间件" aria-hidden="true">#</a> 5. express中间件</h2><h3 id="_1-什么是中间件" tabindex="-1"><a class="header-anchor" href="#_1-什么是中间件" aria-hidden="true">#</a> (1). 什么是中间件</h3><p>中间件（Middleware）本质是一个回调函数 <br> 中间件函数 可以像路由回调一样访问 请求对象（request） ， 响应对象（response）</p><h3 id="_2-中间件的类型" tabindex="-1"><a class="header-anchor" href="#_2-中间件的类型" aria-hidden="true">#</a> (2). 中间件的类型</h3><ul><li>全局中间件</li><li>路由中间件</li></ul><h3 id="_3-定义全局中间件" tabindex="-1"><a class="header-anchor" href="#_3-定义全局中间件" aria-hidden="true">#</a> (3). 定义全局中间件</h3><p>每一个请求 到达服务端之后 都会执行全局中间件函数 <strong>声明中间件函数</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">recordMiddleware</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//实现功能代码</span>
    <span class="token comment">//.....</span>
    <span class="token comment">//执行next函数(当如果希望执行完中间件函数之后，仍然继续执行路由中的回调函数，必须调用next)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><img src="/imgs/source/10.1.png" alt="image.png"></p><blockquote><p>我把中间件理解为一个守卫，一个分流的守卫</p></blockquote><p><strong>应用中间件</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>recordMiddleware<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>声明时可以直接将匿名函数传递给 use</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;定义第一个中间件&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以定义多个中间件</p><h3 id="_3-定义路由中间件" tabindex="-1"><a class="header-anchor" href="#_3-定义路由中间件" aria-hidden="true">#</a> (3). 定义路由中间件</h3><p>如果 只需要对某一些路由进行功能封装 ，则就需要路由中间件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/路径&#39;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">中间件函数</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/路径&#39;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">中间件函数1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">中间件函数2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-静态资源中间件" tabindex="-1"><a class="header-anchor" href="#_4-静态资源中间件" aria-hidden="true">#</a> (4). 静态资源中间件</h3><p>express 内置处理静态资源的中间件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//4. 监听端口 启动服务</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;服务已经启动, 端口4000 正在监听中&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//引入express框架</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建服务对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//静态资源中间件的设置，将当前文件夹下的public目录作为网站的根目录</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;./public&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//当然这个目录中都是一些静态资源</span>
<span class="token comment">//如果访问的内容经常变化，还是需要设置路由</span>
<span class="token comment">//但是，在这里有一个问题，如果public目录下有index.html文件，单独也有index.html的路由，</span>
<span class="token comment">//则谁书写在前，优先执行谁</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/index.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    respsonse<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;首页&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//监听端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3000 端口启动....&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注意事项:</p><ol><li>index.html 文件为默认打开的资源</li><li>如果静态资源与路由规则同时匹配，谁先匹配谁就响应</li><li>路由响应动态资源，静态资源中间件响应静态资源</li></ol></blockquote><h3 id="_5-获取请求体数据body-parser" tabindex="-1"><a class="header-anchor" href="#_5-获取请求体数据body-parser" aria-hidden="true">#</a> (5). 获取请求体数据body-parser</h3><p>express 可以使用 body-parser 包处理请求体<br> 第一步：安装</p><blockquote><p>npm i body-parser</p></blockquote><p>第二步：导入 body-parser 包</p><blockquote><p>const bodyParser = require(&#39;body-parser&#39;);</p></blockquote><p>第三步：获取中间件函数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//处理 querystring 格式的请求体</span>
<span class="token keyword">let</span> urlParser <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//处理 JSON 格式的请求体</span>
<span class="token keyword">let</span> jsonParser <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第四步：设置路由中间件，然后使用 request.body 来获取请求体数据</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&#39;/index.html&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> urlParser<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;获取用户的数据&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取到的请求体数据：<br><img src="/imgs/source/10.2.png" alt="image.png"></p><h2 id="_6-router" tabindex="-1"><a class="header-anchor" href="#_6-router" aria-hidden="true">#</a> 6. Router</h2><h3 id="_1-什么是router" tabindex="-1"><a class="header-anchor" href="#_1-什么是router" aria-hidden="true">#</a> (1). 什么是Router</h3><p>express中的Router是一个完整的中间件和路由系统，可以看做是一个小型的app对象。</p><h3 id="_2-router作用" tabindex="-1"><a class="header-anchor" href="#_2-router作用" aria-hidden="true">#</a> (2). Router作用</h3><p>对路由进行模块化，更好的管理路由</p><h3 id="_3-router使用" tabindex="-1"><a class="header-anchor" href="#_3-router使用" aria-hidden="true">#</a> (3). Router使用</h3><p>创建独立的JS文件(homeRouter.js)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//1. 导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 创建路由器对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 在 router 对象身上添加路由</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;首页&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/cart&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;购物车&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4. 暴露</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>主文件：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5.引入子路由文件</span>
<span class="token keyword">const</span> homeRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./routes/homeRouter&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//6.设置和使用中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>homeRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3000 端口启动....&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-ejs模板引擎" tabindex="-1"><a class="header-anchor" href="#_7-ejs模板引擎" aria-hidden="true">#</a> 7. EJS模板引擎</h2><h3 id="_1-什么是模板引擎" tabindex="-1"><a class="header-anchor" href="#_1-什么是模板引擎" aria-hidden="true">#</a> (1). 什么是模板引擎</h3><p>模板引擎是分离 用户界面和业务数据 的一种技术</p><h3 id="_2-什么是ejs" tabindex="-1"><a class="header-anchor" href="#_2-什么是ejs" aria-hidden="true">#</a> (2). 什么是EJS</h3><p>EJS是一个高效的 JavaScript 的模板引擎<br> 官网：http://ejs.co/<br> 中文站：http://ejs.bootcss.com/<br></p><h3 id="_3-ejs使用" tabindex="-1"><a class="header-anchor" href="#_3-ejs使用" aria-hidden="true">#</a> (3). EJS使用</h3><p>下载安装EJS</p><blockquote><p>npm i ejs --save</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//1.引入ejs</span>
<span class="token keyword">const</span> ejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;ejs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.定义数据</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;李四&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;王二麻子&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//3.ejs解析模板返回结构</span>
<span class="token comment">//&lt;%= %&gt; 是ejs解析内容的标记，作用是输出当前表达式的执行结构</span>
<span class="token keyword">let</span> html <span class="token operator">=</span> ejs<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;%= person.join(&quot;,&quot;) %&gt;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">person</span><span class="token operator">:</span> person <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4.输出结果</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-ejs常用语法" tabindex="-1"><a class="header-anchor" href="#_4-ejs常用语法" aria-hidden="true">#</a> (4). EJS常用语法</h3><p>执行JS代码</p><blockquote><p>&lt;% code %&gt;</p></blockquote><p>输出转义的数据到模板上</p><blockquote><p>&lt;%= code %&gt;</p></blockquote><p>输出非转义的数据到模板上</p><blockquote><p>&lt;%- code %&gt;</p></blockquote><p>8</p><h2 id="_8-express-generator" tabindex="-1"><a class="header-anchor" href="#_8-express-generator" aria-hidden="true">#</a> 8. express-generator</h2><p><a href="https://www.expressjs.com.cn/starter/generator.html" target="_blank" rel="noopener noreferrer"> express-generator文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 这个工具可以快速搭建骨架，不用自己一点点去编写</p><h2 id="_9-文件上传功能" tabindex="-1"><a class="header-anchor" href="#_9-文件上传功能" aria-hidden="true">#</a> 9. 文件上传功能</h2><h3 id="_1-在routers下创建index-js" tabindex="-1"><a class="header-anchor" href="#_1-在routers下创建index-js" aria-hidden="true">#</a> (1). 在routers下创建index.js</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//显示网页的表单</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/portrait&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;portrait&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//处理文件上传</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/portrait&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;成功&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加get和post方法</p><h3 id="_2-在views下创建portrait-ejs" tabindex="-1"><a class="header-anchor" href="#_2-在views下创建portrait-ejs" aria-hidden="true">#</a> (2). 在views下创建portrait.ejs</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>文件上传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>文件上传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/portrait<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        头像：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>portrait<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>点击提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当地址栏url为http://localhost:3000/portrait时，会进入到portrait.ejs页面中</p><blockquote><p>注意这里的enctype=&quot;multipart/form-data&quot;一定要添加上去，要不然获取不到图片文件，放不到请求体里面</p></blockquote><h3 id="_3-formidable-处理文件请求包" tabindex="-1"><a class="header-anchor" href="#_3-formidable-处理文件请求包" aria-hidden="true">#</a> (3). formidable 处理文件请求包</h3><p><a href="https://www.npmjs.com/package/formidable" target="_blank" rel="noopener noreferrer">formidable文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//引入formidable</span>
<span class="token keyword">const</span> formidable <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;formidable&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//处理文件上传</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/portrait&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//创建 form 表单对象</span>
  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">formidable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">multiples</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//解析请求报文</span>
  form<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fields<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fields<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// text radio checkbox select</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// file</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ok&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以看到这个方法中有 fields 和 files 两个参数<br> 在 fields 中主要储存text radio checkbox select 类型的数据<br> 在 files 中主要储存 file 类型的数据<br></p><h3 id="_4-存储图片" tabindex="-1"><a class="header-anchor" href="#_4-存储图片" aria-hidden="true">#</a> (4). 存储图片</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//创建 form 表单对象</span>
  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">formidable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    multiples<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">//设置上传文件的保存目录</span>
    uploadDir<span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">&#39;/../public/images&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">//保持文件后缀</span>
    keepExtensions<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/imgs/source/10.3.png" alt="image.png"> 加入 upliadDir 和 keepExtensions<br> upliadDir：设置上传文件的保存目录<br> keepExtensions：开启保持文件后缀功能<br></p><p>可以看到已经拿到图片了，但是将来用户还要访问该图片，所以还要保存图片的url。<br> 加入将来用户要访问这张图片，那访问的url一定是http://localhost:3000/images/6015787a953a61594d413a500.jpg 这样的一个路径<br></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>form<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fields<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// console.log(fields);// text radio checkbox select</span>
    <span class="token comment">// console.log(files); // file</span>
    <span class="token comment">///images/6015787a953a61594d413a500.jpg</span>
    <span class="token comment">//服务器保存该图片的访问 URL</span>
    <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">&#39;/images/&#39;</span> <span class="token operator">+</span> files<span class="token punctuation">.</span>portrait<span class="token punctuation">.</span>newFilename<span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然，未来这一块肯定是要吧url存入数据库</p><h2 id="_10-防盗链" tabindex="-1"><a class="header-anchor" href="#_10-防盗链" aria-hidden="true">#</a> 10. 防盗链</h2><p>有时候我们在html中引用外部图片地址，会发现图片显示不出来，是因为那个图片网站设置了防盗链。<br> 原理：发送请求会查看请求头的referer是否为设置的域名，如果不是，就禁止访问<br></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> referer <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;referer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>referer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//实例化</span>
    <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>referer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//获取 hostname</span>
    <span class="token keyword">let</span> hostname <span class="token operator">=</span> url<span class="token punctuation">.</span>hostname<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hostname<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//判断</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hostname <span class="token operator">!=</span> <span class="token string">&#39;127.0.0.1&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//响应404</span>
      res<span class="token punctuation">.</span>status<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;h1&gt;404 Not Found!&lt;/h1&gt;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><!----></footer><nav class="page-nav"><p class="hasPrev hasNext inner"><span class="page-nav-item prev"> ← 包管理工具</span><span class="page-nav-item next">mongoDB → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_1-介绍" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1. 介绍"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1. 介绍<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_2-使用" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2. 使用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2. 使用<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_1-下载" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(1). 下载"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(1). 下载<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_2-使用-1" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(2). 使用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(2). 使用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_3-express路由" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3. express路由"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3. express路由<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_1-什么是路由" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(1). 什么是路由"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(1). 什么是路由<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_2-路由的使用" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(2). 路由的使用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(2). 路由的使用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_3-获取请求参数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(3). 获取请求参数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(3). 获取请求参数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_4-获取路由参数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(4). 获取路由参数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(4). 获取路由参数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#小练习" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="小练习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小练习<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_4-express响应设置" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4. express响应设置"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4. express响应设置<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_5-express中间件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5. express中间件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5. express中间件<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_1-什么是中间件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(1). 什么是中间件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(1). 什么是中间件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_2-中间件的类型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(2). 中间件的类型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(2). 中间件的类型<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_3-定义全局中间件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(3). 定义全局中间件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(3). 定义全局中间件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_3-定义路由中间件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(3). 定义路由中间件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(3). 定义路由中间件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_4-静态资源中间件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(4). 静态资源中间件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(4). 静态资源中间件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_5-获取请求体数据body-parser" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(5). 获取请求体数据body-parser"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(5). 获取请求体数据body-parser<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_6-router" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6. Router"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6. Router<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_1-什么是router" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(1). 什么是Router"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(1). 什么是Router<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_2-router作用" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(2). Router作用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(2). Router作用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_3-router使用" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(3). Router使用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(3). Router使用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_7-ejs模板引擎" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7. EJS模板引擎"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7. EJS模板引擎<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_1-什么是模板引擎" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(1). 什么是模板引擎"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(1). 什么是模板引擎<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_2-什么是ejs" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(2). 什么是EJS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(2). 什么是EJS<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_3-ejs使用" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(3). EJS使用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(3). EJS使用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_4-ejs常用语法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(4). EJS常用语法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(4). EJS常用语法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_8-express-generator" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8. express-generator"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8. express-generator<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_9-文件上传功能" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="9. 文件上传功能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->9. 文件上传功能<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_1-在routers下创建index-js" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(1). 在routers下创建index.js"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(1). 在routers下创建index.js<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_2-在views下创建portrait-ejs" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(2). 在views下创建portrait.ejs"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(2). 在views下创建portrait.ejs<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_3-formidable-处理文件请求包" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(3). formidable 处理文件请求包"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(3). formidable 处理文件请求包<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/node/10.html#_4-存储图片" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(4). 存储图片"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(4). 存储图片<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/node/10.html#_10-防盗链" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="10. 防盗链"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->10. 防盗链<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-3202c870.js" defer></script>
  </body>
</html>
